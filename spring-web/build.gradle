/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java Library project to get you started.
 * For more details take a look at the Java Libraries chapter in the Gradle
 * user guide available at https://docs.gradle.org/4.8.1/userguide/java_library_plugin.html
 */

buildscript {
    ext {
        springBootVersion = '2.0.3.RELEASE'
    }
    repositories {
        mavenCentral()
        maven {
            url "https://plugins.gradle.org/m2/"
        }
    }
    dependencies {
        classpath("org.springframework.boot:spring-boot-gradle-plugin:2.0.3.RELEASE")
    }
}


plugins {
    // Apply the java-library plugin to add support for Java Library
    id 'java' // generate executeable jar file
    //id 'java-gradle-plugin' // slf4 중복 바인딩 오류가 이것 때문이었다 주석 처리했다. 나쁜놈
    id 'java-library'
    id 'eclipse'
    id 'idea'
//    id 'io.spring.dependency-management' version '1.0.5.RELEASE' // *sprint-boot 의 의존성 관리
    id 'war' // generate war file

}


sourceCompatibility = 1.8
targetCompatibility = 1.8


// 스프링 로깅을 바꾸기 위해서 필요함
configurations {
    compile.exclude module: 'spring-boot-starter-logging' // compile configuration에서 특정 모듈 제외

  //  compile.exclude group: 'org.springframework.boot', module: 'spring-boot-starter-logging' // compile configuration에서 특정 그룹의 특정 모듈 제외
   // all*.exclude group: 'org.gradle.test.excludes', module: 'reports' // 모든 configuration에서 특정 모듈 제외
}

// In this section you declare where to find the dependencies of your project
repositories {
    // Use jcenter for resolving your dependencies.
    // You can declare any Maven/Ivy/file repository here.
    jcenter()

    mavenCentral()
    maven { url "https://repo.spring.io/snapshot" }
    maven { url 'https://repo.spring.io/libs-snapshot' }
    maven {
        url "http://maven.springframework.org/milestone"
    }

}


configurations {
    compile.exclude module: 'spring-boot-starter-logging' // compile configuration에서 특정 모듈 제외

    //  compile.exclude group: 'org.springframework.boot', module: 'spring-boot-starter-logging' // compile configuration에서 특정 그룹의 특정 모듈 제외
    // all*.exclude group: 'org.gradle.test.excludes', module: 'reports' // 모든 configuration에서 특정 모듈 제외
}


dependencies {
    // This dependency is exported to consumers, that is to say found on their compile classpath.
    api 'org.apache.commons:commons-math3:3.6.1'

    // This dependency is used internally, and not exposed to consumers on their own compile classpath.
    implementation 'com.google.guava:guava:23.0'

    // Use JUnit test framework
    testImplementation 'junit:junit:4.12'


    compile("org.springframework.boot:spring-boot-starter-parent:2.0.3.RELEASE")

    compile("org.springframework.boot:spring-boot-starter:2.0.3.RELEASE")


    compile("org.springframework.boot:spring-boot-starter-web:2.0.3.RELEASE")
            {
                // log4j2 사용을 위해 logback 은 제외시킴
             //   exclude group:'ch.qos.logback'
               // exclude group:'org.slf4j', module: 'slf4j-log4j12'
                exclude group: 'org.springframework.boot', module: 'spring-boot-starter-logging'
                //  exclude group:'org.springframework.boot:spring-boot-starter-logging'
            }


    //compile("org.springframework.boot:spring-boot-starter-thymeleaf")


    // ------ [web]web 을 위해서 필요 -------
    // Tomcat embeded container , war 생성시 providedRuntime 사용, jar 생성시 complie 사용
    //compile("org.springframework.boot:spring-boot-starter-tomcat") // war 생성시 주석처리, jar 생성시 필요
    //providedRuntime("org.springframework.boot:spring-boot-starter-tomcat") //jar 생성시 주석처리
  //  provided ('javax.servlet:javax.servlet-api:4.0.1')

    // JSTL tag lib
    compile("javax.servlet.jsp.jstl:javax.servlet.jsp.jstl-api:1.2.2")
    compile("org.apache.taglibs:taglibs-standard-impl:1.2.5")

    // JSTL for JSP
    compile("javax.servlet.jsp.jstl:jstl:1.2")

    // Need this to compile JSP
    // jar 를 바로 실행 할때는 필요하다. 하지만 war 로 돌릴때는 빼야한다.
     compile ("org.apache.tomcat.embed:tomcat-embed-jasper:9.0.10")

    // Need this to compile JSP,
    //			tomcat-embed-jasper version is not working, no idea why
    compile("org.eclipse.jdt.core.compiler:ecj:4.6.1")


    // Spring Session
    //compile("'org.springframework.session:spring-session:1.3.3.RELEASE")
    //compile group: 'org.springframework.session', name: 'spring-session-core', version: '2.0.4.RELEASE'
    // ------ [web] -------


    // Log 시스템을 기본 logback 에서 log4j2 로 바꾼다.
    compile('org.springframework.boot:spring-boot-starter-log4j2:2.0.3.RELEASE')

    // Spring Security
    compile('org.springframework.boot:spring-boot-starter-security:2.0.3.RELEASE')
    compile('org.springframework.security.oauth:spring-security-oauth2:2.3.3.RELEASE')


    // spring batch core
    // compile group: 'org.springframework.batch', name: 'spring-batch-core', version: "${springBatchVersion}"


    // multipart
    compile group: 'commons-fileupload', name: 'commons-fileupload', version: '1.4'


    //Quartz
    //compile group: 'org.quartz-scheduler', name: 'quartz', version: '2.3.1'
    //compile group: 'com.mchange', name: 'c3p0', version: '0.9.5.4'
    // compile group: 'com.mchange', name: 'mchange-commons-java', version: '0.2.15'


    // mysql - jdbc
    compile('org.springframework.boot:spring-boot-starter-jdbc:2.0.3.RELEASE')
    compile group: 'mysql', name: 'mysql-connector-java', version: '8.0.11'

    // Vibur 란 DBCP
    compile group: 'com.googlecode.concurrentlinkedhashmap', name: 'concurrentlinkedhashmap-lru', version: '1.4.2'
    compile group: 'org.vibur', name: 'vibur-dbcp', version: '19.1'



    //Package as an executable jar/war
    compile('org.springframework.boot:spring-boot-maven-plugin:2.0.3.RELEASE')


    testCompile('org.springframework.boot:spring-boot-starter-test:2.0.3.RELEASE')


    // json
    compile group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version: '2.9.8'
    compile group: 'com.fasterxml.jackson.core', name: 'jackson-core', version: '2.9.8'
    compile group: 'com.fasterxml.jackson.core', name: 'jackson-annotations', version: '2.9.8'

    //compile project(':spring-lib')

    // math parser
    compile group: 'org.mariuszgromada.math', name: 'MathParser.org-mXparser', version: '4.3.1'
    // log
  // compile group: 'org.apache.logging.log4j', name: 'log4j-slf4j-impl', version: '2.8.2'
 //   compile group: 'org.apache.logging.log4j', name: 'log4j-core', version: '2.8.2'
  // compile group: 'org.apache.logging.log4j', name: 'log4j-api', version: '2.8.2'
  // compile group: 'org.apache.logging.log4j', name: 'log4j-jcl', version: '2.8.2'

   // compile group: 'org.slf4j', name: 'slf4j-api', version: '1.7.25'
  // compile group: 'org.slf4j', name: 'slf4j-ext', version: '1.7.25'

  //  compile group: 'org.slf4j', name: 'jcl-over-slf4j', version: '1.7.25'
  //  compile group: 'org.slf4j', name: 'jul-to-slf4j', version: '1.7.25'
}





//apply plugin: "org.springframework.boot" 이게 적용되어 있어야 bootJar 가 실행됨
/*
bootJar {
    baseName = 'module-web'
    version =  '0.1.0'
    enabled = true

   //MANIFEST.MF 에 설정 추가 , Spring jar 에 포함하지 않고 외부 폴더의 jar파일을 포함시켜야 할 경우
   manifest {
        attributes("Class-Path": "libs/jython-standalone-2.7.2.jar", // (1)
                "Implementation-Version": "${project.version}") // (2)
    }
}

*/
task wrapper(type: Wrapper) {
    gradleVersion = '4.9'
}

/* war 설정 */
/*
bootWar {
    baseName = 'module-web-war'
    version = '0.0.1-SNAPSHOT'
}
*/
